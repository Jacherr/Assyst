"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const HTTP = require("http");
const HTTPS = require("https");
const TLS = require("tls");
const constants_1 = require("./constants");
const AvailableALPNProtocols = [
    constants_1.ALPNProtocols.HTTP1_1,
    constants_1.ALPNProtocols.HTTP1,
];
exports.AvailableALPNProtocols = AvailableALPNProtocols;
const Communications = {
    HTTP,
    HTTPS,
    TLS,
    HTTP2: null,
};
exports.Communications = Communications;
const tryHTTP2 = (() => {
    const version = process.version.split('.').map((x, i) => parseInt((!i) ? x.slice(1) : x));
    if (version[0] >= 9) {
        if (version[0] === 9) {
            // https://nodejs.org/en/blog/release/v9.8.0/ http2 fix on this version
            return version[1] >= 8;
        }
        return true;
    }
    return false;
})();
if (tryHTTP2) {
    try {
        Communications.HTTP2 = require('http2');
        AvailableALPNProtocols.unshift(constants_1.ALPNProtocols.HTTP2);
    }
    catch (e) { }
}
